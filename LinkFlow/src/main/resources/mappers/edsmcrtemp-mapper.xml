<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="EdsmFormMapper">
	<resultMap id="edocFormResult" type="EdocFormDto" extends="commonMapper.commonResult">
		<id column="ED_FR_CODE" property="edFrCode"/>
		<result column="ED_FR_NAME" property="edFrName"/>
		<result column="ED_FR_CONTENT" property="edFrContent"/>
		<result column="PRES_DATE" property="presDate"/>
		<result column="SEC_CODE" property="secCode"/>
	</resultMap>
	
	<!-- 양식 생성 (등록) -->
	<insert id="insertForm">
		INSERT INTO 
            TB_EDOC_FORM
            (
                  ED_FR_CODE
                , ED_FR_NAME
                , ED_FR_CONTENT
                , PRES_DATE
                , SEC_CODE
                , REG_ID
                , MOD_ID
            )
            VALUES
            (
                  SEQ_EDOC_FORM.NEXTVAL
                , #{edFrName}
                , #{edFrContent}
                , #{presDate}
                , #{secCode}
                , #{regId} 
                , #{modId}  
            )
		
	</insert>
	
	<!-- 양식 목록 조회 및 페이징 -->
	<select id="selectCrTempListCnt" resultType="_int">
		SELECT COUNT(*)
		FROM TB_EDOC_FORM
		WHERE DEL_YN = 'N'
	</select>
	
	<select id="selectCrTempList" resultMap="edocFormResult">
		 SELECT EF.ED_FR_CODE
           , EF.ED_FR_NAME
           , EF.PRES_DATE
           , EF.SEC_CODE
			     , TO_CHAR(EF.REG_DATE, 'YYYY-MM-DD') REG_DATE
			     , EF.MOD_DATE
			     , M.USER_NAME REG_ID
           , EF.MOD_ID
           , EF.DEL_YN
		FROM TB_EDOC_FORM EF
		JOIN TB_MEMBER M ON M.USER_ID = EF.REG_ID
		WHERE EF.DEL_YN = 'N'
		ORDER BY EF.MOD_DATE DESC
	</select>

</mapper>
