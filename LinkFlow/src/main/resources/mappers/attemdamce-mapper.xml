<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="attemdamceDaoMapper">
	<resultMap type="AttemdamceDto" id="attemdamceResult" extends="commonMapper.commonResult">
		<id column="ATTENDANCE_NO" property="attNo"/>
		<result column="USER_ID" property="userId"/>
		<result column="START_DTIME" property="startDtime"/>
		<result column="END_DTIME" property="endDtime"/>
		<result column="LATE_COUNT" property="lateCount"/>
		<result column="ABSENT_COUNT" property="absentCount"/>

		
	</resultMap>	
	
	<!-- 올해 출결 현황 알아내는 쿼리문 -->
	
	<!-- 올해 근무 일수 알아내는 쿼리문 -->
		<select id="myYearWorkDay" resultMap="attemdamceResult">
			SELECT SUM((END_DTIME - START_DTIME) * 24) AS YearWorkDay
				FROM TB_ATTENDANCE
				WHERE USER_ID = #{userId} 
				
				  AND TO_CHAR(START_DTIME, 'YYYY')  = TO_CAHR(SYSDATE, 'YYYY');

		</select>

</mapper>
